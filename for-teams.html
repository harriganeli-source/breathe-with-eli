<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helping the Helpers | Eli Harrigan</title>
    <meta name="description" content="Breathwork and nervous system training for healthcare workers, therapists, and caregivers. Prevent burnout, stay grounded, and sustain the work you do for others.">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="images/favicon.svg">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Helping the Helpers | Eli Harrigan">
    <meta property="og:description" content="Breathwork and nervous system training for healthcare workers, therapists, and caregivers. Prevent burnout, stay grounded, and sustain the work you do for others.">
    <meta property="og:image" content="https://breathewitheli.com/images/team-workshop.jpg">
    <meta property="og:url" content="https://breathewitheli.com/for-teams">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        @media (max-width: 768px) {
            .two-column-grid {
                grid-template-columns: 1fr !important;
                gap: 2rem !important;
            }
        }
        /* Featured testimonial styling */
        .featured-testimonial {
            max-width: 800px;
            margin: 0 auto 3rem;
            display: flex;
            align-items: center;
            gap: 2rem;
            padding: 2rem;
            background: var(--color-bg);
            border-radius: 12px;
        }
        .featured-testimonial .testimonial-photo {
            flex-shrink: 0;
        }
        .featured-testimonial .testimonial-photo img {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
        }
        .featured-testimonial .testimonial-content p {
            font-size: 1.15rem;
            font-style: italic;
            margin-bottom: 1rem;
        }
        .featured-testimonial .testimonial-content cite {
            font-size: 1rem;
        }
        @media (max-width: 768px) {
            .featured-testimonial {
                flex-direction: column;
                text-align: center;
            }
        }
        /* Force three-column testimonials on desktop */
        .testimonials-grid {
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }
        /* Stack photo and text vertically in the grid */
        .testimonials-grid .testimonial-card--with-photo {
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        @media (max-width: 992px) {
            .testimonials-grid {
                grid-template-columns: 1fr;
            }
            .testimonials-grid .testimonial-card--with-photo {
                flex-direction: row;
                align-items: flex-start;
                text-align: left;
            }
        }

        /* Connected Dots Network - ABSOLUTE position on page, not fixed to viewport */
        .connected-dots {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.15;
            z-index: 1;
            overflow: visible;
        }
        /* Testimonial cards need to be above the organism */
        #testimonials .testimonial-card {
            position: relative;
            z-index: 2;
        }
        /* Override default fade-in for testimonials - slower, staggered, from bottom */
        #testimonials .testimonial-card.fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.2s ease, transform 1.2s ease;
        }
        #testimonials .testimonial-card.fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Stagger delays for left-to-right animation */
        #testimonials .testimonial-card:nth-child(1).fade-in {
            transition-delay: 0s;
        }
        #testimonials .testimonial-card:nth-child(2).fade-in {
            transition-delay: 0.4s;
        }
        #testimonials .testimonial-card:nth-child(3).fade-in {
            transition-delay: 0.8s;
        }
        .connected-dots .dot {
            /* Dynamic hue set by JS - base sage green (100) shifts based on position */
            fill: hsl(var(--dot-hue, 100), 45%, 38%);
            transition: fill 0.3s ease;
        }
        .connected-dots .line {
            /* Lines use gradient between connected dots' hues */
            stroke: hsl(var(--line-hue, 100), 45%, 38%);
            stroke-width: 1.5;
            opacity: 0.6;
            transition: stroke 0.3s ease;
        }
        .intro-section-teams {
            position: relative;
        }
        .intro-section-teams .container {
            position: relative;
            z-index: 1;
        }
        @media (max-width: 768px) {
            #connected-dots-container {
                display: none;
            }
            #connected-dots-mobile-container {
                display: none;
            }
        }
        @media (min-width: 769px) {
            #connected-dots-mobile-container {
                display: none;
            }
        }
        /* Mobile version - FIXED position in viewport */
        .connected-dots-mobile {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            pointer-events: none;
            opacity: 0.35;
            z-index: 100;
            overflow: visible;
        }
        .connected-dots-mobile .dot {
            /* Dynamic hue set by JS - base sage green (100) shifts based on position */
            fill: hsl(var(--dot-hue, 100), 45%, 38%);
            transition: fill 0.3s ease;
        }
        .connected-dots-mobile .line {
            /* Lines use gradient between connected dots' hues */
            stroke: hsl(var(--line-hue, 100), 45%, 38%);
            stroke-width: 1.2;
            opacity: 0.6;
            transition: stroke 0.3s ease;
        }
        .who-this-is-for {
            position: relative;
        }
        .who-this-is-for .container {
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">Eli Harrigan</a>
            <button class="nav-toggle" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu">
                <li><a href="about.html">About</a></li>
                <li class="nav-dropdown">
                    <a href="work-with-me.html">Work With Me</a>
                    <ul class="dropdown-menu">
                        <li><a href="work-with-me.html#breathwork">Dynamic Breathwork</a></li>
                        <li><a href="work-with-me.html#coaching">Somatic Coaching</a></li>
                        <li><a href="work-with-me.html#mens-groups">Men's Groups</a></li>
                    </ul>
                </li>
                <li><a href="upcoming.html">Groups & Workshops</a></li>
                <li><a href="for-teams.html">For Teams</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="book.html" class="nav-cta">Book a Session</a></li>
            </ul>
        </div>
    </nav>

    <!-- Page Header -->
    <header class="page-header">
        <div class="container">
            <h1>Helping the Helpers</h1>
        </div>
    </header>

    <!-- Connected Dots Container - spans full page for absolute positioning (Desktop) -->
    <div id="connected-dots-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; overflow: visible;">
        <svg class="connected-dots" id="connected-dots-svg" viewBox="0 0 1000 3000" preserveAspectRatio="xMidYMin slice" style="width: 100%; height: 100%;">
            <!-- Lines and dots will be created by JavaScript -->
        </svg>
    </div>

    <!-- Connected Dots Container - Mobile version (fixed position for viewport) -->
    <div id="connected-dots-mobile-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; pointer-events: none; z-index: 1; overflow: visible;">
        <svg class="connected-dots-mobile" id="connected-dots-mobile-svg" viewBox="0 0 400 600" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%;">
            <!-- Lines and dots will be created by JavaScript -->
        </svg>
    </div>

    <!-- Intro + Image Section (Two Column) -->
    <section class="content-section intro-section-teams" style="position: relative; background-color: var(--color-bg);">
        <div class="container">
            <div class="two-column-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: start;">
                <!-- Image -->
                <div>
                    <img src="images/team-workshop.jpg" alt="Outdoor group workshop session" style="width: 100%; max-height: 450px; object-fit: cover; border-radius: 8px;">
                </div>
                <!-- Intro Text -->
                <div style="font-size: 0.95rem;">
                    <p>The world is changing fast, and what sets people apart is changing with it.</p>
                    <p>It's less about what you know and more about how you are. Your presence. Your steadiness. Your frequency. The ability to stay grounded when things get hard and stay connected to the people around you.</p>
                    <p>Healthcare workers, therapists, coaches, and caregivers carry more than most people realize. The weight of other people's pain. The pressure to hold it together when everything feels urgent. Through breathwork and nervous system training, your people learn to down-regulate stress in real time, recover more fully between intense periods, and stay present with each other when the pressure rises.</p>
                    <p>Team members can learn to be a resource for each other—not just in their work, but in how they regulate.</p>
                    <p>And there's something that happens when people breathe together in a room. They come out of it feeling more like a team than when they walked in.</p>
                </div>
            </div>
        </div>
        <a href="#testimonials" class="scroll-indicator" aria-label="Scroll to content" style="position: absolute; bottom: 1rem; left: 50%; transform: translateX(-50%); opacity: 0.5;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 32px; height: 32px;">
                <path d="M7 13l5 5 5-5M7 6l5 5 5-5"/>
            </svg>
        </a>
    </section>

    <!-- Testimonials Section -->
    <section id="testimonials" class="content-section" style="background-color: var(--color-bg-alt);">
        <div class="container">
            <!-- Featured Testimonial -->
            <div class="featured-testimonial">
                <div class="testimonial-photo">
                    <img src="images/andrea.jpg" alt="Andrea M. Garroway, Ph.D.">
                </div>
                <div class="testimonial-content">
                    <p>"Eli created a supportive environment for our team throughout the entire experience. We were able to bond, reflect about our work, and develop renewed appreciation for the value of the mind-body connection."</p>
                    <cite>— Andrea M. Garroway, Ph.D., Clinical Psychologist</cite>
                </div>
            </div>
            <!-- Other Testimonials -->
            <div class="testimonials-grid">
                <div class="testimonial-card testimonial-card--with-photo">
                    <div class="testimonial-photo">
                        <img src="images/hyjekkarol.jpg" alt="Karol Hyjek" style="object-position: center 20%;">
                    </div>
                    <div class="testimonial-content">
                        <p>"Breathwork has been a deeply impactful outlet for me. It's given me a powerful way to release emotion and reconnect with myself when life feels heavy. Through conscious breathing, I've found clarity, calm, and a sense of release that helps me stay grounded and prevents burnout."</p>
                        <cite>— Karol Hyjek, MD</cite>
                    </div>
                </div>
                <div class="testimonial-card testimonial-card--with-photo">
                    <div class="testimonial-photo">
                        <img src="images/melissa_DC.jpg" alt="Melissa O'Loughlin">
                    </div>
                    <div class="testimonial-content">
                        <p>"The concepts Eli teaches about acknowledging feelings have literally changed how I move through every single day."</p>
                        <cite>— Melissa O'Loughlin, DC, CACCP</cite>
                    </div>
                </div>
                <div class="testimonial-card testimonial-card--with-photo">
                    <div class="testimonial-photo">
                        <img src="images/testimonial-matt-rohrer.jpg" alt="Matthew L. Rohrer">
                    </div>
                    <div class="testimonial-content">
                        <p>"Doing breathwork with Eli has helped open me up and shift my relationship to my own pain, sadness, and joy."</p>
                        <cite>— Matthew L. Rohrer, LCSW, Psychotherapist</cite>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- What I Offer Section -->
    <section class="content-section">
        <div class="container" style="max-width: 900px;">
            <h2 style="text-align: center; margin-bottom: 2.5rem;">What I Offer</h2>

            <div class="benefit-item" style="margin-bottom: 2rem;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="1.5">
                    <path d="M21 12a9 9 0 1 1-9-9"/>
                    <polyline points="21 3 21 9 15 9"/>
                    <path d="M21 9l-6 6"/>
                </svg>
                <div>
                    <h3 style="margin-bottom: 0.5rem; font-size: 1.5rem;">Reset: A Single Session</h3>
                    <p style="color: var(--color-text-light); margin-bottom: 1rem;">A 2-hour guided breathwork session for your team.</p>
                    <p style="color: var(--color-text-light); margin-bottom: 1rem;">You'll move through the experience together, arriving somewhere different than where you started—more present, more open, more connected to yourselves and each other.</p>
                    <p style="color: var(--color-text-light);">Works well as a standalone workshop or an introduction before committing to deeper work.</p>
                </div>
            </div>

            <div class="benefit-item" style="margin-bottom: 2rem;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="1.5">
                    <circle cx="5" cy="12" r="2"/>
                    <circle cx="11" cy="12" r="2"/>
                    <circle cx="17" cy="12" r="2"/>
                    <circle cx="23" cy="12" r="2"/>
                    <path d="M7 12h2M13 12h2M19 12h2"/>
                </svg>
                <div>
                    <h3 style="margin-bottom: 0.5rem; font-size: 1.5rem;">Sustain: A Four-Session Series</h3>
                    <p style="color: var(--color-text-light); margin-bottom: 1rem;">Four sessions over eight weeks.</p>
                    <p style="color: var(--color-text-light); margin-bottom: 1rem;">Breathwork isn't the same twice. What surfaces in session one is different from session three. The body releases in layers, and building a real relationship with the practice takes repetition.</p>
                    <p style="color: var(--color-text-light);">Over the series, you'll develop a shared language and a felt sense of what regulation actually means—not as a concept, but as something you can return to on your own—creating lasting shifts in how you relate and work together.</p>
                </div>
            </div>

            <div class="benefit-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="1.5">
                    <path d="M18.178 8c5.096 0 5.096 8 0 8-5.095 0-7.133-8-12.739-8-4.873 0-4.873 8 0 8 5.606 0 7.644-8 12.74-8z"/>
                </svg>
                <div>
                    <h3 style="margin-bottom: 0.5rem; font-size: 1.5rem;">Ongoing Support</h3>
                    <p style="color: var(--color-text-light); margin-bottom: 1rem;">Monthly sessions on retainer for teams that want breathwork as part of their culture, not a one-time event.</p>
                    <p style="color: var(--color-text-light); margin-bottom: 1rem;">The world is changing fast, and what sets people apart is changing too. It's less about what you know and more about how you are: your presence, your steadiness, your ability to stay grounded when things get hard.</p>
                    <p style="color: var(--color-text-light);">Teams that invest in this kind of work aren't just taking care of themselves. They're protecting the thing that actually matters: real human connection.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Who This Is For Section -->
    <section class="content-section who-this-is-for" style="background-color: var(--color-bg-alt);">
        <div class="container" style="max-width: 800px;">
            <h2 style="text-align: center; margin-bottom: 2rem;">Who This Is For</h2>
            <ul style="list-style: disc; padding-left: 1.5rem; color: var(--color-text-light);">
                <li>Teams in high-pressure environments: healthcare, production, startups, nonprofits, sports</li>
                <li>Leaders who sense something's missing in how people relate at work</li>
                <li>Organizations who want their people to thrive, not just perform</li>
            </ul>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
        <div class="container" style="text-align: center;">
            <h2>Interested in bringing this to your team?</h2>
            <p style="max-width: 600px; margin: 1rem auto 2rem;">Let's talk about what your team needs and how I can help.</p>
            <a href="contact.html" class="btn btn-primary">Get in Touch</a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <a href="index.html" class="footer-logo">Eli Harrigan</a>
                    <p>Breathwork & Coaching</p>
                    <p class="footer-location">Rochester, NY & Online</p>
                </div>
                <div class="footer-nav">
                    <h4>Navigate</h4>
                    <ul>
                        <li><a href="about.html">About</a></li>
                        <li class="nav-dropdown">
                    <a href="work-with-me.html">Work With Me</a>
                    <ul class="dropdown-menu">
                        <li><a href="work-with-me.html#breathwork">Dynamic Breathwork</a></li>
                        <li><a href="work-with-me.html#coaching">Somatic Coaching</a></li>
                        <li><a href="work-with-me.html#mens-groups">Men's Groups</a></li>
                    </ul>
                </li>
                        <li><a href="upcoming.html">Groups & Workshops</a></li>
                        <li><a href="for-teams.html">For Teams</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="book.html">Book</a></li>
                    </ul>
                </div>
                <div class="footer-connect">
                    <h4>Connect</h4>
                    <ul>
                        <li><a href="mailto:eli@breathewitheli.com">eli@breathewitheli.com</a></li>
                        <li><a href="https://instagram.com/breathewitheli" target="_blank" rel="noopener">Instagram</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Eli Harrigan. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>

    <!-- Connected Dots Animation - Scroll-linked floating organism -->
    <script>
    (function() {
        // Only run on desktop
        if (window.innerWidth <= 768) return;

        const svg = document.getElementById('connected-dots-svg');
        if (!svg) return;

        // Configuration
        const dotRadius = 5;
        const breathCycle = 10000;
        const lineGrowDuration = 3500;  // Slower line growth
        const lineGrowDelay = 1300;     // A bit more delay before starting
        const lineStagger = 350;        // More delay between lines

        // Initial hexagon positions (base size, will be scaled dynamically)
        const baseScale = 1.0;  // Base scale - will grow as organism moves down page
        const maxScale = 1.8;   // Maximum scale when fully expanded
        let currentScale = baseScale;  // Current dynamic scale
        const basePositions = [
            { x: 0, y: -110 },     // 0: top
            { x: 95, y: -55 },     // 1: top right
            { x: 95, y: 55 },      // 2: bottom right
            { x: 0, y: 110 },      // 3: bottom
            { x: -95, y: 55 },     // 4: bottom left
            { x: -95, y: -55 },    // 5: top left
            { x: 0, y: 0, isCenter: true }  // 6: center
        ];

        const connections = [
            [6, 0], [6, 1], [6, 2], [6, 3], [6, 4], [6, 5],
            [0, 1], [1, 2], [2, 3], [3, 4], [4, 5], [5, 0]
        ];

        // State
        const dots = [];
        const dotElements = [];
        const lineElements = [];
        const startTime = performance.now();

        // Organism position in SVG viewBox coordinates
        // viewBox is 0-1000 x, 0-3000 y (maps to full page width, ~3000px page height)
        let organismX = 700;  // Start right side
        let organismY = 400;  // Near top of page
        let organismRotation = 0;

        // Target position the organism drifts toward (in SVG coords)
        let targetX = 700;
        let targetY = 400;
        let targetRotation = 0;
        let targetScale = 1.0;  // Target scale for expansion

        // Section positions (will be calculated)
        let sections = [];

        // Page dimensions for coordinate conversion
        let pageHeight = 3000;

        // Initialize dots
        // Base hue is sage green (100), with ±30 range around the hexagon
        // Creates subtle warm (gold/olive) to cool (teal) gradient
        basePositions.forEach((pos, i) => {
            // Calculate base hue for this dot (outer dots shift, center stays at base)
            // i: 0=top, 1=top-right, 2=bottom-right, 3=bottom, 4=bottom-left, 5=top-left, 6=center
            const baseHue = pos.isCenter ? 100 : 100 + (i / 6) * 90 - 45; // Range: 55-145 (wider spread)

            const dot = {
                baseX: pos.x,
                baseY: pos.y,
                x: 700 + pos.x,
                y: 400 + pos.y,
                phase: Math.random() * Math.PI * 2,
                isCenter: pos.isCenter || false,
                baseHue: baseHue,
                currentHue: baseHue
            };
            dots.push(dot);

            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            circle.setAttribute('class', 'dot');
            circle.setAttribute('r', dot.isCenter ? dotRadius * 1.3 : dotRadius);
            if (dot.isCenter) circle.style.opacity = '0.85';
            circle.setAttribute('cx', dot.x);
            circle.setAttribute('cy', dot.y);
            // Set initial hue
            circle.style.setProperty('--dot-hue', baseHue);
            dotElements.push(circle);
        });

        // Initialize lines
        connections.forEach(([i, j], idx) => {
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('class', 'line');
            line.setAttribute('x1', dots[i].x);
            line.setAttribute('y1', dots[i].y);
            line.setAttribute('x2', dots[i].x);
            line.setAttribute('y2', dots[i].y);
            // Set line hue as average of connected dots
            const lineHue = (dots[i].baseHue + dots[j].baseHue) / 2;
            line.style.setProperty('--line-hue', lineHue);
            lineElements.push({ element: line, from: i, to: j, index: idx });
            svg.appendChild(line);
        });

        dotElements.forEach(el => svg.appendChild(el));

        // Calculate section positions for scroll-based movement
        // All positions are in SVG viewBox coordinates (0-1000 x, 0-3000 y)
        function updateSectionPositions() {
            const introSection = document.querySelector('.intro-section-teams');
            const testimonialsSection = document.getElementById('testimonials');
            const whatIOfferSection = document.querySelectorAll('.content-section')[2];

            // Get page height and section positions
            pageHeight = document.body.scrollHeight || 3000;
            const introTop = introSection ? introSection.offsetTop : 0;
            const testimonialsTop = testimonialsSection ? testimonialsSection.offsetTop : 600;
            const whatIOfferTop = whatIOfferSection ? whatIOfferSection.offsetTop : 1200;

            // Convert page pixels to SVG Y coordinates (page pixels * 3000 / pageHeight)
            const toSvgY = (pageY) => (pageY / pageHeight) * 3000;

            sections = [
                {
                    el: introSection,
                    scrollThreshold: introTop,
                    targetX: 700,  // Right side (70% of 1000)
                    targetY: toSvgY(introTop + 620),  // Below text
                    rotation: 0,
                    scale: 1.0  // Start very flat (initialSquash makes it wide/short)
                },
                {
                    el: testimonialsSection,
                    scrollThreshold: testimonialsTop + 150,  // More delay - trigger later
                    targetX: 120, // Far left side (12% of 1000)
                    targetY: toSvgY(testimonialsTop + 300),
                    rotation: 45,
                    scale: 1.6  // Grow and become more regular shaped
                },
                {
                    el: whatIOfferSection,
                    scrollThreshold: whatIOfferTop + 150,  // More delay - trigger later
                    targetX: 880, // Right side (88% of 1000)
                    targetY: toSvgY(whatIOfferTop + 400),
                    rotation: 90,
                    scale: 1.9  // Fully expanded, normal hexagon shape
                }
            ];

            // Set initial target position
            if (sections[0]) {
                targetX = sections[0].targetX;
                targetY = sections[0].targetY;
                targetScale = sections[0].scale || 1.0;
                organismX = targetX;
                organismY = targetY;
                currentScale = targetScale;
            }

            // Update container height to match page
            const container = document.getElementById('connected-dots-container');
            if (container) {
                container.style.height = pageHeight + 'px';
            }
        }

        // Track which section we're targeting and when we last changed
        let currentSectionIndex = 0;
        let lastSectionChangeTime = 0;
        const sectionChangeCooldown = 3000;  // 3 second cooldown before accepting new target

        // Scroll handler - updates target position based on which section is in view
        // But with a cooldown to prevent bouncing
        function handleScroll() {
            const scrollY = window.scrollY;
            const viewportMiddle = scrollY + window.innerHeight * 0.4;
            const now = performance.now();

            // Find which section the viewport middle is in
            let newSectionIndex = 0;
            for (let i = sections.length - 1; i >= 0; i--) {
                const section = sections[i];
                if (!section.el) continue;

                if (viewportMiddle >= section.scrollThreshold) {
                    newSectionIndex = i;
                    break;
                }
            }

            // Only change target if:
            // 1. It's a different section than current
            // 2. Enough time has passed since last change (cooldown)
            if (newSectionIndex !== currentSectionIndex &&
                (now - lastSectionChangeTime) > sectionChangeCooldown) {
                currentSectionIndex = newSectionIndex;
                lastSectionChangeTime = now;
                const section = sections[currentSectionIndex];
                if (section) {
                    targetX = section.targetX;
                    targetY = section.targetY;
                    targetRotation = section.rotation;
                    targetScale = section.scale || 1.0;
                }
            }
        }

        window.addEventListener('scroll', handleScroll, { passive: true });
        window.addEventListener('resize', updateSectionPositions);
        // Delay initial setup to ensure page is laid out
        setTimeout(updateSectionPositions, 100);

        // Continuous rotation for crawling effect
        let continuousRotation = 0;

        function animate(time) {
            const elapsed = time - startTime;

            // Smoothly drift toward target position
            const lerpSpeed = 0.002;
            organismX += (targetX - organismX) * lerpSpeed;
            organismY += (targetY - organismY) * lerpSpeed;
            organismRotation += (targetRotation - organismRotation) * lerpSpeed;
            currentScale += (targetScale - currentScale) * lerpSpeed;  // Smooth scale transition

            // Add continuous slow rotation for "crawling" effect
            continuousRotation += 0.015;

            // Breathing factor - REDUCED amplitude, stays larger
            const breathPhase = (time % breathCycle) / breathCycle;
            const breathFactor = Math.sin(breathPhase * Math.PI * 2);

            // Convert rotation to radians (target rotation + continuous crawl rotation)
            const rotRad = ((organismRotation + continuousRotation) * Math.PI) / 180;
            const cosR = Math.cos(rotRad);
            const sinR = Math.sin(rotRad);

            // Squeeze/stretch factor - organism changes shape dramatically over time
            // Multiple overlapping cycles for more organic, unpredictable distortion
            const squeezePhase1 = (time % 12000) / 12000;  // Primary 12 second cycle
            const squeezePhase2 = (time % 8000) / 8000;    // Secondary 8 second cycle
            const squeezePhase3 = (time % 19000) / 19000;  // Tertiary 19 second cycle (prime for variation)
            const squeezeFactor = Math.sin(squeezePhase1 * Math.PI * 2) * 0.6
                                + Math.sin(squeezePhase2 * Math.PI * 2) * 0.3
                                + Math.sin(squeezePhase3 * Math.PI * 2) * 0.25;
            // Base squash that persists even at larger scales (reduced but still present)
            const initialSquash = Math.max(0, (1.5 - currentScale) * 1.2);
            const baseDistortion = 0.15;  // Always have some distortion
            const scaleX = 1 + squeezeFactor * 0.35 + initialSquash + baseDistortion * Math.sin(squeezePhase2 * Math.PI * 4);
            const scaleY = 1 - squeezeFactor * 0.35 - initialSquash * 0.7 - baseDistortion * Math.sin(squeezePhase3 * Math.PI * 4);

            // Color shift based on organism movement and rotation
            // Subtle shift: rotation affects overall hue, wander affects individual dots
            const rotationHueShift = Math.sin(continuousRotation * 0.01) * 25;

            // Update dot positions
            dots.forEach((dot, i) => {
                // LOTS of wander for crawling movement - dots can overlap and cross paths
                // Each dot has its own unique wander pattern with large amplitude
                dot.phase += 0.0025 + (i * 0.0006);  // Slow speeds per dot
                const wanderX = Math.sin(dot.phase) * 45 + Math.sin(dot.phase * 1.7) * 25 + Math.sin(dot.phase * 0.3) * 18;
                const wanderY = Math.cos(dot.phase * 0.7) * 45 + Math.cos(dot.phase * 1.3) * 25 + Math.cos(dot.phase * 0.5) * 18;

                // Dynamic hue shift based on dot's wander movement
                // Each dot's hue shifts slightly based on its phase
                const wanderHueShift = Math.sin(dot.phase * 0.5) * 18;
                dot.currentHue = dot.baseHue + rotationHueShift + wanderHueShift;
                dotElements[i].style.setProperty('--dot-hue', dot.currentHue);

                // Breathing expansion (small)
                const breathExpand = breathFactor * 2;
                const breathScale = 1 + breathExpand * 0.01;

                // Apply squeeze/stretch to base positions, plus dynamic scale
                const expandedX = dot.baseX * currentScale * scaleX * breathScale;
                const expandedY = dot.baseY * currentScale * scaleY * breathScale;

                // Apply rotation
                const rotatedX = expandedX * cosR - expandedY * sinR;
                const rotatedY = expandedX * sinR + expandedY * cosR;

                // Final position in SVG coordinates (absolute on page)
                dot.x = organismX + rotatedX + wanderX;
                dot.y = organismY + rotatedY + wanderY;

                dotElements[i].setAttribute('cx', dot.x);
                dotElements[i].setAttribute('cy', dot.y);
            });

            // Update lines with growth animation and dynamic hue
            lineElements.forEach(({ element, from, to, index }) => {
                const fromDot = dots[from];
                const toDot = dots[to];

                // Update line hue as average of connected dots' current hues
                const lineHue = (fromDot.currentHue + toDot.currentHue) / 2;
                element.style.setProperty('--line-hue', lineHue);

                const thisLineDelay = lineGrowDelay + (index * lineStagger);
                let growProgress = 0;
                if (elapsed > thisLineDelay) {
                    growProgress = Math.min(1, (elapsed - thisLineDelay) / lineGrowDuration);
                    growProgress = 1 - Math.pow(1 - growProgress, 3);
                }

                element.setAttribute('x1', fromDot.x);
                element.setAttribute('y1', fromDot.y);
                element.setAttribute('x2', fromDot.x + (toDot.x - fromDot.x) * growProgress);
                element.setAttribute('y2', fromDot.y + (toDot.y - fromDot.y) * growProgress);
            });

            requestAnimationFrame(animate);
        }

        requestAnimationFrame(animate);
    })();

    // ==================== MOBILE VERSION ====================
    // Same behavior as desktop - absolute positioned, scroll-linked movement
    (function() {
        // Only run on mobile
        if (window.innerWidth > 768) return;

        const mobileSvg = document.getElementById('connected-dots-mobile-svg');
        const mobileContainer = document.getElementById('connected-dots-mobile-container');
        if (!mobileSvg || !mobileContainer) return;

        // Configuration
        const dotRadius = 4;
        const breathCycle = 10000;
        const lineGrowDuration = 3000;
        const lineGrowDelay = 1000;
        const lineStagger = 250;

        // Smaller hexagon for mobile (scaled down from desktop)
        const basePositions = [
            { x: 0, y: -70 },      // 0: top
            { x: 60, y: -35 },     // 1: top right
            { x: 60, y: 35 },      // 2: bottom right
            { x: 0, y: 70 },       // 3: bottom
            { x: -60, y: 35 },     // 4: bottom left
            { x: -60, y: -35 },    // 5: top left
            { x: 0, y: 0, isCenter: true }  // 6: center
        ];

        const connections = [
            [6, 0], [6, 1], [6, 2], [6, 3], [6, 4], [6, 5],
            [0, 1], [1, 2], [2, 3], [3, 4], [4, 5], [5, 0]
        ];

        // State
        const dots = [];
        const dotElements = [];
        const lineElements = [];
        const startTime = performance.now();

        // Organism position in SVG viewBox coordinates
        // viewBox is 0-400 x, 0-600 y (maps to viewport)
        let organismX = 200;  // Centered horizontally
        let organismY = 300;  // Center of viewport
        let organismRotation = 0;
        let currentScale = 1.2;

        // Target position the organism drifts toward (in SVG coords)
        let targetX = 200;
        let targetY = 300;
        let targetRotation = 0;
        let targetScale = 1.2;

        // Section positions (will be calculated)
        let sections = [];
        let pageHeight = 3000;

        // Initialize dots with color gradient
        basePositions.forEach((pos, i) => {
            const baseHue = pos.isCenter ? 100 : 100 + (i / 6) * 90 - 45; // Same range as desktop

            const dot = {
                baseX: pos.x,
                baseY: pos.y,
                x: organismX + pos.x,
                y: organismY + pos.y,
                phase: Math.random() * Math.PI * 2,
                isCenter: pos.isCenter || false,
                baseHue: baseHue,
                currentHue: baseHue
            };
            dots.push(dot);

            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            circle.setAttribute('class', 'dot');
            circle.setAttribute('r', dot.isCenter ? dotRadius * 1.3 : dotRadius);
            if (dot.isCenter) circle.style.opacity = '0.85';
            circle.setAttribute('cx', dot.x);
            circle.setAttribute('cy', dot.y);
            circle.style.setProperty('--dot-hue', baseHue);
            dotElements.push(circle);
        });

        // Initialize lines
        connections.forEach(([i, j], idx) => {
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('class', 'line');
            line.setAttribute('x1', dots[i].x);
            line.setAttribute('y1', dots[i].y);
            line.setAttribute('x2', dots[i].x);
            line.setAttribute('y2', dots[i].y);
            const lineHue = (dots[i].baseHue + dots[j].baseHue) / 2;
            line.style.setProperty('--line-hue', lineHue);
            lineElements.push({ element: line, from: i, to: j, index: idx });
            mobileSvg.appendChild(line);
        });
        dotElements.forEach(el => mobileSvg.appendChild(el));

        // Scroll-based movement - directly set position (no lerp delay)
        function handleScroll() {
            const scrollY = window.scrollY;
            const maxScroll = document.body.scrollHeight - window.innerHeight;
            const scrollProgress = Math.min(1, Math.max(0, scrollY / maxScroll));

            // DIRECTLY set organism position based on scroll
            // X: swing between left (80) and right (320)
            organismX = 200 + Math.sin(scrollProgress * Math.PI * 3) * 120;
            // Y: move up and down in viewport
            organismY = 200 + Math.sin(scrollProgress * Math.PI * 2) * 150;
            // Also update targets for lerp (rotation/scale still use lerp)
            targetRotation = scrollProgress * 180;
            targetScale = 1.0 + scrollProgress * 0.5;
        }

        window.addEventListener('scroll', handleScroll, { passive: true });
        // Set initial position
        handleScroll();

        let continuousRotation = 0;

        function animate(time) {
            const elapsed = time - startTime;

            // Position is set directly by handleScroll, just lerp rotation/scale
            const lerpSpeed = 0.08;
            organismRotation += (targetRotation - organismRotation) * lerpSpeed;
            currentScale += (targetScale - currentScale) * lerpSpeed;

            continuousRotation += 0.015;

            const breathPhase = (time % breathCycle) / breathCycle;
            const breathFactor = Math.sin(breathPhase * Math.PI * 2);

            const rotRad = ((organismRotation + continuousRotation) * Math.PI) / 180;
            const cosR = Math.cos(rotRad);
            const sinR = Math.sin(rotRad);

            // Squeeze/stretch - organic distortion (no initial squash on mobile)
            const squeezePhase1 = (time % 12000) / 12000;
            const squeezePhase2 = (time % 8000) / 8000;
            const squeezePhase3 = (time % 19000) / 19000;
            const squeezeFactor = Math.sin(squeezePhase1 * Math.PI * 2) * 0.5
                                + Math.sin(squeezePhase2 * Math.PI * 2) * 0.25
                                + Math.sin(squeezePhase3 * Math.PI * 2) * 0.2;
            const baseDistortion = 0.12;
            const scaleX = 1 + squeezeFactor * 0.3 + baseDistortion * Math.sin(squeezePhase2 * Math.PI * 4);
            const scaleY = 1 - squeezeFactor * 0.3 - baseDistortion * Math.sin(squeezePhase3 * Math.PI * 4);

            // Color shift based on movement and rotation
            const rotationHueShift = Math.sin(continuousRotation * 0.01) * 25;

            dots.forEach((dot, i) => {
                // Large wander for overlapping dots (scaled for mobile)
                dot.phase += 0.0025 + (i * 0.0006);
                const wanderX = Math.sin(dot.phase) * 30 + Math.sin(dot.phase * 1.7) * 18 + Math.sin(dot.phase * 0.3) * 12;
                const wanderY = Math.cos(dot.phase * 0.7) * 30 + Math.cos(dot.phase * 1.3) * 18 + Math.cos(dot.phase * 0.5) * 12;

                // Dynamic hue shift
                const wanderHueShift = Math.sin(dot.phase * 0.5) * 18;
                dot.currentHue = dot.baseHue + rotationHueShift + wanderHueShift;
                dotElements[i].style.setProperty('--dot-hue', dot.currentHue);

                const breathExpand = breathFactor * 2;
                const breathScale = 1 + breathExpand * 0.01;

                const expandedX = dot.baseX * currentScale * scaleX * breathScale;
                const expandedY = dot.baseY * currentScale * scaleY * breathScale;

                const rotatedX = expandedX * cosR - expandedY * sinR;
                const rotatedY = expandedX * sinR + expandedY * cosR;

                dot.x = organismX + rotatedX + wanderX;
                dot.y = organismY + rotatedY + wanderY;

                dotElements[i].setAttribute('cx', dot.x);
                dotElements[i].setAttribute('cy', dot.y);
            });

            lineElements.forEach(({ element, from, to, index }) => {
                const fromDot = dots[from];
                const toDot = dots[to];

                // Update line hue dynamically
                const lineHue = (fromDot.currentHue + toDot.currentHue) / 2;
                element.style.setProperty('--line-hue', lineHue);

                const thisLineDelay = lineGrowDelay + (index * lineStagger);
                let growProgress = elapsed > thisLineDelay ? Math.min(1, (elapsed - thisLineDelay) / lineGrowDuration) : 0;
                growProgress = 1 - Math.pow(1 - growProgress, 3);

                element.setAttribute('x1', fromDot.x);
                element.setAttribute('y1', fromDot.y);
                element.setAttribute('x2', fromDot.x + (toDot.x - fromDot.x) * growProgress);
                element.setAttribute('y2', fromDot.y + (toDot.y - fromDot.y) * growProgress);
            });

            requestAnimationFrame(animate);
        }

        requestAnimationFrame(animate);
    })();
    </script>

</body>
</html>
